import{s as C,d as ut,t as ft}from"./CQEiDZtN.js";import{_ as ht,r as R,o as gt,g as dt,x as P,z as V,J as G,A as yt,G as pt,H as vt,y as B,Q as nt,O as rt,R as xt,v as I,S as H,C as J}from"./D0YC6FMM.js";import{o as mt}from"./CmKTTxBW.js";import{c as wt}from"./Du6F06X2.js";import"./Gi6I4Gst.js";function _t(t){let e;for(;e=t.sourceEvent;)t=e;return t}function it(t,e){if(t=_t(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const bt={passive:!1},O={capture:!0,passive:!1};function K(t){t.stopImmediatePropagation()}function L(t){t.preventDefault(),t.stopImmediatePropagation()}function Nt(t){var e=t.document.documentElement,n=C(t).on("dragstart.drag",L,O);"onselectstart"in e?n.on("selectstart.drag",L,O):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Mt(t,e){var n=t.document.documentElement,i=C(t).on("dragstart.drag",null);e&&(i.on("click.drag",L,O),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const F=t=>()=>t;function W(t,{sourceEvent:e,subject:n,target:i,identifier:s,active:a,x:f,y:o,dx:h,dy:u,dispatch:y}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:y}})}W.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function At(t){return!t.ctrlKey&&!t.button}function kt(){return this.parentNode}function zt(t,e){return e??{x:t.x,y:t.y}}function Et(){return navigator.maxTouchPoints||"ontouchstart"in this}function St(){var t=At,e=kt,n=zt,i=Et,s={},a=ut("start","drag","end"),f=0,o,h,u,y,_=0;function p(r){r.on("mousedown.drag",g).filter(i).on("touchstart.drag",l).on("touchmove.drag",d,bt).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(r,b){if(!(y||!t.call(this,r,b))){var M=N(this,e.call(this,r,b),r,b,"mouse");M&&(C(r.view).on("mousemove.drag",w,O).on("mouseup.drag",c,O),Nt(r.view),K(r),u=!1,o=r.clientX,h=r.clientY,M("start",r))}}function w(r){if(L(r),!u){var b=r.clientX-o,M=r.clientY-h;u=b*b+M*M>_}s.mouse("drag",r)}function c(r){C(r.view).on("mousemove.drag mouseup.drag",null),Mt(r.view,u),L(r),s.mouse("end",r)}function l(r,b){if(t.call(this,r,b)){var M=r.changedTouches,k=e.call(this,r,b),A=M.length,v,m;for(v=0;v<A;++v)(m=N(this,k,r,b,M[v].identifier,M[v]))&&(K(r),m("start",r,M[v]))}}function d(r){var b=r.changedTouches,M=b.length,k,A;for(k=0;k<M;++k)(A=s[b[k].identifier])&&(L(r),A("drag",r,b[k]))}function x(r){var b=r.changedTouches,M=b.length,k,A;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),k=0;k<M;++k)(A=s[b[k].identifier])&&(K(r),A("end",r,b[k]))}function N(r,b,M,k,A,v){var m=a.copy(),z=it(v||M,b),S,E,Y;if((Y=n.call(r,new W("beforestart",{sourceEvent:M,target:p,identifier:A,active:f,x:z[0],y:z[1],dx:0,dy:0,dispatch:m}),k))!=null)return S=Y.x-z[0]||0,E=Y.y-z[1]||0,function $(Q,tt,ct){var et=z,U;switch(Q){case"start":s[A]=$,U=f++;break;case"end":delete s[A],--f;case"drag":z=it(ct||tt,b),U=f;break}m.call(Q,r,new W(Q,{sourceEvent:tt,subject:Y,target:p,identifier:A,active:U,x:z[0]+S,y:z[1]+E,dx:z[0]-et[0],dy:z[1]-et[1],dispatch:m}),k)}}return p.filter=function(r){return arguments.length?(t=typeof r=="function"?r:F(!!r),p):t},p.container=function(r){return arguments.length?(e=typeof r=="function"?r:F(r),p):e},p.subject=function(r){return arguments.length?(n=typeof r=="function"?r:F(r),p):n},p.touchable=function(r){return arguments.length?(i=typeof r=="function"?r:F(!!r),p):i},p.on=function(){var r=a.on.apply(a,arguments);return r===a?p:r},p.clickDistance=function(r){return arguments.length?(_=(r=+r)*r,p):Math.sqrt(_)},p}function Tt(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function s(){var a,f=n.length,o,h=0,u=0;for(a=0;a<f;++a)o=n[a],h+=o.x,u+=o.y;for(h=(h/f-t)*i,u=(u/f-e)*i,a=0;a<f;++a)o=n[a],o.x-=h,o.y-=u}return s.initialize=function(a){n=a},s.x=function(a){return arguments.length?(t=+a,s):t},s.y=function(a){return arguments.length?(e=+a,s):e},s.strength=function(a){return arguments.length?(i=+a,s):i},s}function jt(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return lt(this.cover(e,n),e,n,t)}function lt(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var s,a=t._root,f={data:i},o=t._x0,h=t._y0,u=t._x1,y=t._y1,_,p,g,w,c,l,d,x;if(!a)return t._root=f,t;for(;a.length;)if((c=e>=(_=(o+u)/2))?o=_:u=_,(l=n>=(p=(h+y)/2))?h=p:y=p,s=a,!(a=a[d=l<<1|c]))return s[d]=f,t;if(g=+t._x.call(null,a.data),w=+t._y.call(null,a.data),e===g&&n===w)return f.next=a,s?s[d]=f:t._root=f,t;do s=s?s[d]=new Array(4):t._root=new Array(4),(c=e>=(_=(o+u)/2))?o=_:u=_,(l=n>=(p=(h+y)/2))?h=p:y=p;while((d=l<<1|c)===(x=(w>=p)<<1|g>=_));return s[x]=a,s[d]=f,t}function Dt(t){var e,n,i=t.length,s,a,f=new Array(i),o=new Array(i),h=1/0,u=1/0,y=-1/0,_=-1/0;for(n=0;n<i;++n)isNaN(s=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(f[n]=s,o[n]=a,s<h&&(h=s),s>y&&(y=s),a<u&&(u=a),a>_&&(_=a));if(h>y||u>_)return this;for(this.cover(h,u).cover(y,_),n=0;n<i;++n)lt(this,f[n],o[n],t[n]);return this}function $t(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,s=this._x1,a=this._y1;if(isNaN(n))s=(n=Math.floor(t))+1,a=(i=Math.floor(e))+1;else{for(var f=s-n||1,o=this._root,h,u;n>t||t>=s||i>e||e>=a;)switch(u=(e<i)<<1|t<n,h=new Array(4),h[u]=o,o=h,f*=2,u){case 0:s=n+f,a=i+f;break;case 1:n=s-f,a=i+f;break;case 2:s=n+f,i=a-f;break;case 3:n=s-f,i=a-f;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=s,this._y1=a,this}function Ct(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Pt(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function T(t,e,n,i,s){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=s}function It(t,e,n){var i,s=this._x0,a=this._y0,f,o,h,u,y=this._x1,_=this._y1,p=[],g=this._root,w,c;for(g&&p.push(new T(g,s,a,y,_)),n==null?n=1/0:(s=t-n,a=e-n,y=t+n,_=e+n,n*=n);w=p.pop();)if(!(!(g=w.node)||(f=w.x0)>y||(o=w.y0)>_||(h=w.x1)<s||(u=w.y1)<a))if(g.length){var l=(f+h)/2,d=(o+u)/2;p.push(new T(g[3],l,d,h,u),new T(g[2],f,d,l,u),new T(g[1],l,o,h,d),new T(g[0],f,o,l,d)),(c=(e>=d)<<1|t>=l)&&(w=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=w)}else{var x=t-+this._x.call(null,g.data),N=e-+this._y.call(null,g.data),r=x*x+N*N;if(r<n){var b=Math.sqrt(n=r);s=t-b,a=e-b,y=t+b,_=e+b,i=g.data}}return i}function Bt(t){if(isNaN(y=+this._x.call(null,t))||isNaN(_=+this._y.call(null,t)))return this;var e,n=this._root,i,s,a,f=this._x0,o=this._y0,h=this._x1,u=this._y1,y,_,p,g,w,c,l,d;if(!n)return this;if(n.length)for(;;){if((w=y>=(p=(f+h)/2))?f=p:h=p,(c=_>=(g=(o+u)/2))?o=g:u=g,e=n,!(n=n[l=c<<1|w]))return this;if(!n.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(i=e,d=l)}for(;n.data!==t;)if(s=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,s?(a?s.next=a:delete s.next,this):e?(a?e[l]=a:delete e[l],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[d]=n:this._root=n),this):(this._root=a,this)}function Yt(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Xt(){return this._root}function Lt(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Vt(t){var e=[],n,i=this._root,s,a,f,o,h;for(i&&e.push(new T(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,a=n.x0,f=n.y0,o=n.x1,h=n.y1)&&i.length){var u=(a+o)/2,y=(f+h)/2;(s=i[3])&&e.push(new T(s,u,y,o,h)),(s=i[2])&&e.push(new T(s,a,y,u,h)),(s=i[1])&&e.push(new T(s,u,f,o,y)),(s=i[0])&&e.push(new T(s,a,f,u,y))}return this}function Gt(t){var e=[],n=[],i;for(this._root&&e.push(new T(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var s=i.node;if(s.length){var a,f=i.x0,o=i.y0,h=i.x1,u=i.y1,y=(f+h)/2,_=(o+u)/2;(a=s[0])&&e.push(new T(a,f,o,y,_)),(a=s[1])&&e.push(new T(a,y,o,h,_)),(a=s[2])&&e.push(new T(a,f,_,y,u)),(a=s[3])&&e.push(new T(a,y,_,h,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Ot(t){return t[0]}function Rt(t){return arguments.length?(this._x=t,this):this._x}function Ft(t){return t[1]}function Qt(t){return arguments.length?(this._y=t,this):this._y}function Z(t,e,n){var i=new q(e??Ot,n??Ft,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function q(t,e,n,i,s,a){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=s,this._y1=a,this._root=void 0}function ot(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var D=Z.prototype=q.prototype;D.copy=function(){var t=new q(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=ot(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var s=0;s<4;++s)(i=e.source[s])&&(i.length?n.push({source:i,target:e.target[s]=new Array(4)}):e.target[s]=ot(i));return t};D.add=jt;D.addAll=Dt;D.cover=$t;D.data=Ct;D.extent=Pt;D.find=It;D.remove=Bt;D.removeAll=Yt;D.root=Xt;D.size=Lt;D.visit=Vt;D.visitAfter=Gt;D.x=Rt;D.y=Qt;function j(t){return function(){return t}}function X(t){return(t()-.5)*1e-6}function Ut(t){return t.x+t.vx}function Ht(t){return t.y+t.vy}function Jt(t){var e,n,i,s=1,a=1;typeof t!="function"&&(t=j(t==null?1:+t));function f(){for(var u,y=e.length,_,p,g,w,c,l,d=0;d<a;++d)for(_=Z(e,Ut,Ht).visitAfter(o),u=0;u<y;++u)p=e[u],c=n[p.index],l=c*c,g=p.x+p.vx,w=p.y+p.vy,_.visit(x);function x(N,r,b,M,k){var A=N.data,v=N.r,m=c+v;if(A){if(A.index>p.index){var z=g-A.x-A.vx,S=w-A.y-A.vy,E=z*z+S*S;E<m*m&&(z===0&&(z=X(i),E+=z*z),S===0&&(S=X(i),E+=S*S),E=(m-(E=Math.sqrt(E)))/E*s,p.vx+=(z*=E)*(m=(v*=v)/(l+v)),p.vy+=(S*=E)*m,A.vx-=z*(m=1-m),A.vy-=S*m)}return}return r>g+m||M<g-m||b>w+m||k<w-m}}function o(u){if(u.data)return u.r=n[u.data.index];for(var y=u.r=0;y<4;++y)u[y]&&u[y].r>u.r&&(u.r=u[y].r)}function h(){if(e){var u,y=e.length,_;for(n=new Array(y),u=0;u<y;++u)_=e[u],n[_.index]=+t(_,u,e)}}return f.initialize=function(u,y){e=u,i=y,h()},f.iterations=function(u){return arguments.length?(a=+u,f):a},f.strength=function(u){return arguments.length?(s=+u,f):s},f.radius=function(u){return arguments.length?(t=typeof u=="function"?u:j(+u),h(),f):t},f}function Kt(t){return t.index}function at(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Wt(t){var e=Kt,n=_,i,s=j(30),a,f,o,h,u,y=1;t==null&&(t=[]);function _(l){return 1/Math.min(o[l.source.index],o[l.target.index])}function p(l){for(var d=0,x=t.length;d<y;++d)for(var N=0,r,b,M,k,A,v,m;N<x;++N)r=t[N],b=r.source,M=r.target,k=M.x+M.vx-b.x-b.vx||X(u),A=M.y+M.vy-b.y-b.vy||X(u),v=Math.sqrt(k*k+A*A),v=(v-a[N])/v*l*i[N],k*=v,A*=v,M.vx-=k*(m=h[N]),M.vy-=A*m,b.vx+=k*(m=1-m),b.vy+=A*m}function g(){if(f){var l,d=f.length,x=t.length,N=new Map(f.map((b,M)=>[e(b,M,f),b])),r;for(l=0,o=new Array(d);l<x;++l)r=t[l],r.index=l,typeof r.source!="object"&&(r.source=at(N,r.source)),typeof r.target!="object"&&(r.target=at(N,r.target)),o[r.source.index]=(o[r.source.index]||0)+1,o[r.target.index]=(o[r.target.index]||0)+1;for(l=0,h=new Array(x);l<x;++l)r=t[l],h[l]=o[r.source.index]/(o[r.source.index]+o[r.target.index]);i=new Array(x),w(),a=new Array(x),c()}}function w(){if(f)for(var l=0,d=t.length;l<d;++l)i[l]=+n(t[l],l,t)}function c(){if(f)for(var l=0,d=t.length;l<d;++l)a[l]=+s(t[l],l,t)}return p.initialize=function(l,d){f=l,u=d,g()},p.links=function(l){return arguments.length?(t=l,g(),p):t},p.id=function(l){return arguments.length?(e=l,p):e},p.iterations=function(l){return arguments.length?(y=+l,p):y},p.strength=function(l){return arguments.length?(n=typeof l=="function"?l:j(+l),w(),p):n},p.distance=function(l){return arguments.length?(s=typeof l=="function"?l:j(+l),c(),p):s},p}const Zt=1664525,qt=1013904223,st=4294967296;function te(){let t=1;return()=>(t=(Zt*t+qt)%st)/st}function ee(t){return t.x}function ne(t){return t.y}var re=10,ie=Math.PI*(3-Math.sqrt(5));function oe(t){var e,n=1,i=.001,s=1-Math.pow(i,1/300),a=0,f=.6,o=new Map,h=ft(_),u=ut("tick","end"),y=te();t==null&&(t=[]);function _(){p(),u.call("tick",e),n<i&&(h.stop(),u.call("end",e))}function p(c){var l,d=t.length,x;c===void 0&&(c=1);for(var N=0;N<c;++N)for(n+=(a-n)*s,o.forEach(function(r){r(n)}),l=0;l<d;++l)x=t[l],x.fx==null?x.x+=x.vx*=f:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=f:(x.y=x.fy,x.vy=0);return e}function g(){for(var c=0,l=t.length,d;c<l;++c){if(d=t[c],d.index=c,d.fx!=null&&(d.x=d.fx),d.fy!=null&&(d.y=d.fy),isNaN(d.x)||isNaN(d.y)){var x=re*Math.sqrt(.5+c),N=c*ie;d.x=x*Math.cos(N),d.y=x*Math.sin(N)}(isNaN(d.vx)||isNaN(d.vy))&&(d.vx=d.vy=0)}}function w(c){return c.initialize&&c.initialize(t,y),c}return g(),e={tick:p,restart:function(){return h.restart(_),e},stop:function(){return h.stop(),e},nodes:function(c){return arguments.length?(t=c,g(),o.forEach(w),e):t},alpha:function(c){return arguments.length?(n=+c,e):n},alphaMin:function(c){return arguments.length?(i=+c,e):i},alphaDecay:function(c){return arguments.length?(s=+c,e):+s},alphaTarget:function(c){return arguments.length?(a=+c,e):a},velocityDecay:function(c){return arguments.length?(f=1-c,e):1-f},randomSource:function(c){return arguments.length?(y=c,o.forEach(w),e):y},force:function(c,l){return arguments.length>1?(l==null?o.delete(c):o.set(c,w(l)),e):o.get(c)},find:function(c,l,d){var x=0,N=t.length,r,b,M,k,A;for(d==null?d=1/0:d*=d,x=0;x<N;++x)k=t[x],r=c-k.x,b=l-k.y,M=r*r+b*b,M<d&&(A=k,d=M);return A},on:function(c,l){return arguments.length>1?(u.on(c,l),e):u.on(c)}}}function ae(){var t,e,n,i,s=j(-30),a,f=1,o=1/0,h=.81;function u(g){var w,c=t.length,l=Z(t,ee,ne).visitAfter(_);for(i=g,w=0;w<c;++w)e=t[w],l.visit(p)}function y(){if(t){var g,w=t.length,c;for(a=new Array(w),g=0;g<w;++g)c=t[g],a[c.index]=+s(c,g,t)}}function _(g){var w=0,c,l,d=0,x,N,r;if(g.length){for(x=N=r=0;r<4;++r)(c=g[r])&&(l=Math.abs(c.value))&&(w+=c.value,d+=l,x+=l*c.x,N+=l*c.y);g.x=x/d,g.y=N/d}else{c=g,c.x=c.data.x,c.y=c.data.y;do w+=a[c.data.index];while(c=c.next)}g.value=w}function p(g,w,c,l){if(!g.value)return!0;var d=g.x-e.x,x=g.y-e.y,N=l-w,r=d*d+x*x;if(N*N/h<r)return r<o&&(d===0&&(d=X(n),r+=d*d),x===0&&(x=X(n),r+=x*x),r<f&&(r=Math.sqrt(f*r)),e.vx+=d*g.value*i/r,e.vy+=x*g.value*i/r),!0;if(g.length||r>=o)return;(g.data!==e||g.next)&&(d===0&&(d=X(n),r+=d*d),x===0&&(x=X(n),r+=x*x),r<f&&(r=Math.sqrt(f*r)));do g.data!==e&&(N=a[g.data.index]*i/r,e.vx+=d*N,e.vy+=x*N);while(g=g.next)}return u.initialize=function(g,w){t=g,n=w,y()},u.strength=function(g){return arguments.length?(s=typeof g=="function"?g:j(+g),y(),u):s},u.distanceMin=function(g){return arguments.length?(f=g*g,u):Math.sqrt(f)},u.distanceMax=function(g){return arguments.length?(o=g*g,u):Math.sqrt(o)},u.theta=function(g){return arguments.length?(h=g*g,u):Math.sqrt(h)},u}function se(t){var e=j(.1),n,i,s;typeof t!="function"&&(t=j(t==null?0:+t));function a(o){for(var h=0,u=n.length,y;h<u;++h)y=n[h],y.vx+=(s[h]-y.x)*i[h]*o}function f(){if(n){var o,h=n.length;for(i=new Array(h),s=new Array(h),o=0;o<h;++o)i[o]=isNaN(s[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return a.initialize=function(o){n=o,f()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:j(+o),f(),a):e},a.x=function(o){return arguments.length?(t=typeof o=="function"?o:j(+o),f(),a):t},a}function ue(t){var e=j(.1),n,i,s;typeof t!="function"&&(t=j(t==null?0:+t));function a(o){for(var h=0,u=n.length,y;h<u;++h)y=n[h],y.vy+=(s[h]-y.y)*i[h]*o}function f(){if(n){var o,h=n.length;for(i=new Array(h),s=new Array(h),o=0;o<h;++o)i[o]=isNaN(s[o]=+t(n[o],o,n))?0:+e(n[o],o,n)}}return a.initialize=function(o){n=o,f()},a.strength=function(o){return arguments.length?(e=typeof o=="function"?o:j(+o),f(),a):e},a.y=function(o){return arguments.length?(t=typeof o=="function"?o:j(+o),f(),a):t},a}const le={props:{isMobile:{type:Boolean,required:!0}},setup(t){const e=R([]),n=R([]),i=R(null),s=R(!1),a=mt(wt),f=u=>a(u),o=async()=>{try{const u=localStorage.getItem("spotify_access_token");if(!u)throw new Error("No Spotify token provided");const y={Authorization:`Bearer ${u}`},_=await xt.get("/api/get_playlists",{headers:y});if(_.data.error)throw new Error(_.data.error);const p=_.data.playlists||[];h(p),s.value=!0}catch(u){console.error("Error fetching playlists:",u),i.value="Failed to load playlists data."}},h=u=>{const y=C("#d3-network-graph").attr("preserveAspectRatio","xMinYMin meet").attr("viewBox",`0 0 ${t.isMobile?400:800} ${t.isMobile?300:600}`).classed("svg-content-responsive",!0).style("background-color","transparent"),_=t.isMobile?400:800,p=t.isMobile?300:600,g=u.map(v=>({id:v.id,name:v.name})),w=[],c={};u.forEach(v=>{v.artists.forEach(m=>{c[m]||(c[m]=[]),c[m].push(v.id)})}),Object.values(c).forEach(v=>{for(let m=0;m<v.length;m++)for(let z=m+1;z<v.length;z++){const S=v[m],E=v[z],Y=w.find($=>$.source===S&&$.target===E||$.source===E&&$.target===S);Y?(Y.strength+=1,Y.sharedArtists.push(...Object.keys(c).filter($=>c[$].includes(S)&&c[$].includes(E)))):w.push({source:S,target:E,strength:1,sharedArtists:Object.keys(c).filter($=>c[$].includes(S)&&c[$].includes(E))})}}),w.forEach(v=>{v.sharedArtists=[...new Set(v.sharedArtists)]}),e.value=w;let l=null;const d=oe(g).force("link",Wt(w).id(v=>v.id).distance(v=>150/v.strength)).force("charge",ae().strength(-200)).force("center",Tt(_/2,p/2)).force("collision",Jt().radius(30)).force("x",se(_/2).strength(.05)).force("y",ue(p/2).strength(.05)),x=y.append("g").attr("stroke","#999").attr("stroke-opacity",.6).selectAll("line").data(w).enter().append("line").attr("stroke-width",v=>Math.sqrt(v.strength)*2),N=y.append("g").attr("stroke","#fff").attr("stroke-width",1.5).selectAll("circle").data(g).enter().append("circle").attr("r",10).attr("fill",v=>a(v.id)).call(St().on("start",M).on("drag",k).on("end",A)),r=C("body").append("div").attr("class","tooltip").style("position","absolute").style("background","#fff").style("border","1px solid #ccc").style("padding","10px").style("border-radius","5px").style("pointer-events","none").style("display","none");function b(){return"ontouchstart"in window||navigator.maxTouchPoints}N.on("mouseover",function(v,m){b()||l!==this&&(l&&C(l).attr("stroke",null).attr("r",10),l=this,r.style("display","block").html(`<strong>${m.name}</strong>`).style("top",`${v.pageY-10}px`).style("left",`${v.pageX+10}px`),C(this).attr("stroke","#000").attr("r",12))}).on("mouseout",function(){b()||(r.style("display","none"),C(this).attr("stroke",null).attr("r",10),l=null)}).on("click",function(v,m){b()&&(l===this?(r.style("display","none"),C(this).attr("stroke",null).attr("r",10),l=null):(l&&C(l).attr("stroke",null).attr("r",10),l=this,r.style("display","block").html(`<strong>${m.name}</strong>`).style("top",`${v.pageY-10}px`).style("left",`${v.pageX+10}px`),C(this).attr("stroke","#000").attr("r",12)))}),x.on("mouseover",(v,m)=>{const z=m.sharedArtists.join(", ");r.style("display","block").html(`<strong>Playlists:</strong> ${m.source.name} & ${m.target.name}<br/><strong>Shared Artists:</strong> ${z}`).style("top",`${v.pageY-10}px`).style("left",`${v.pageX+10}px`)}).on("mouseout",()=>{r.style("display","none")}),d.on("tick",()=>{x.attr("x1",v=>v.source.x).attr("y1",v=>v.source.y).attr("x2",v=>v.target.x).attr("y2",v=>v.target.y),N.attr("cx",v=>v.x).attr("cy",v=>v.y)});function M(v,m){v.active||d.alphaTarget(.3).restart(),m.fx=m.x,m.fy=m.y}function k(v,m){m.fx=v.x,m.fy=v.y}function A(v,m){v.active||d.alphaTarget(0),m.fx=null,m.fy=null}};return gt(()=>{o()}),{connections:e,isolatedNodes:n,error:i,getColor:f,isLoaded:s}}},ce={class:"chart-container-transparent",style:{flex:"1",padding:"10px"}},fe={key:0,class:"error-message"},he={key:1,class:"loading-spinner"},ge={id:"d3-network-graph",style:{width:"100%",height:"100%"}},de={key:2},ye={key:0},pe={key:1};function ve(t,e,n,i,s,a){const f=dt("v-progress-circular");return I(),P("div",ce,[i.error?(I(),P("div",fe,V(i.error),1)):G("",!0),i.isLoaded?G("",!0):(I(),P("div",he,[yt(f,{size:40,width:4,indeterminate:"",color:"white",class:"loading-spinner"})])),pt((I(),P("svg",ge,null,512)),[[vt,i.isLoaded]]),i.isLoaded?(I(),P("div",de,[i.connections.length>0?(I(),P("div",ye,[e[1]||(e[1]=B("h4",{class:"heading"},"Connections Overview",-1)),(I(!0),P(nt,null,rt(i.connections,(o,h)=>(I(),P("div",{key:h,class:"connection-text"},[B("p",null,[B("strong",{style:H({color:i.getColor(o.source.id)})},V(o.source.name),5),e[0]||(e[0]=J(" and ")),B("strong",{style:H({color:i.getColor(o.target.id)})},V(o.target.name),5),J(" share the following artists: "+V(o.sharedArtists.join(", ")),1)])]))),128))])):G("",!0),i.isolatedNodes.length>0?(I(),P("div",pe,[e[3]||(e[3]=B("h4",{class:"heading"},"Isolated Playlists",-1)),(I(!0),P(nt,null,rt(i.isolatedNodes,(o,h)=>(I(),P("div",{key:h,class:"connection-text"},[B("p",null,[B("strong",{style:H({color:i.getColor(o.id)})},V(o.name),5),e[2]||(e[2]=J(" has no shared artists with your other playlists. "))])]))),128))])):G("",!0),e[4]||(e[4]=B("p",{class:"info-text"}," Hover over the data points and connections on the chart to view additional details. ",-1)),e[5]||(e[5]=B("p",{class:"info-text"}," Note: This graph displays your public playlists only. If you have a limited number of playlists, the graph may not contain many nodes. ",-1))])):G("",!0)])}const Ne=ht(le,[["render",ve],["__scopeId","data-v-7e39451a"]]);export{Ne as default};
