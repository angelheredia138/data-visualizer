import{_ as w,r as a,o as B,e as N,a as I,g as T,x as s,y as n,z as u,E as V,B as g,J as y,A as E,U as b,Q as z,O as S,v as t,C as R}from"./D0YC6FMM.js";import{s as U}from"./C8Cd6dlY.js";import{c as $}from"./BxKCmZ95.js";const D={class:"chart-container-transparent"},F={key:0,class:"error-message"},J={key:1},L={key:0,class:"countdown-message"},M={key:2},O={class:"artists-list"},P=["src","alt"],Q={__name:"top-artists",setup(W){const f=a([]),l=a(3),c=a(!1),_=a(!1),p=a(!1),v=a(null),m=a(null);let r;B(()=>{r=$.create(m.value,{resize:!0,useWorker:!0}),k()}),N(()=>{r&&r.reset()});const{$axios:h}=I(),k=async()=>{try{p.value=!0;const e=localStorage.getItem("spotify_access_token");if(!e)throw new Error("No Spotify token found.");const o={Authorization:`Bearer ${e}`},d=await h.get("/top-five-artists?time_range=long_term",{headers:o});f.value=d.data.topArtists}catch(e){v.value="Error fetching top artists data.",console.error(e)}finally{p.value=!1}},C=()=>{c.value=!0;let e=l.value;const o=U(()=>{e--,l.value=e,e===0&&(clearInterval(o),c.value=!1,_.value=!0,x())},1e3)},x=()=>{r&&r({angle:90,spread:45,startVelocity:45,particleCount:100,origin:{x:.5,y:.5}})};return(e,o)=>{const d=T("v-btn");return t(),s("div",D,[n("canvas",{ref_key:"confettiCanvas",ref:m,class:"confetti-canvas"},null,512),v.value?(t(),s("div",F,u(v.value),1)):_.value?(t(),s("div",M,[n("div",O,[(t(!0),s(z,null,S(f.value,(i,A)=>(t(),s("div",{key:A,class:"artist-card"},[n("img",{src:i.image,alt:i.name,class:"artist-image"},null,8,P),n("div",null,[n("h3",null,u(i.name),1),n("p",null,"Popularity: "+u(i.popularity),1)])]))),128))])])):(t(),s("div",J,[c.value?y("",!0):(t(),V(d,{key:0,color:"primary",onClick:C,class:"reveal-button"},{default:g(()=>o[0]||(o[0]=[R(" Reveal Top Artists ")])),_:1})),E(b,{name:"fade"},{default:g(()=>[c.value&&l.value>0?(t(),s("h3",L,u(l.value),1)):y("",!0)]),_:1})]))])}}},H=w(Q,[["__scopeId","data-v-4183875a"]]);export{H as default};
