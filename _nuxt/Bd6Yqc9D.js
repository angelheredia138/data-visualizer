import{_ as M,r as c,a as z,I as B,o as S,e as I,x as i,J as p,z as N,y as O,v as d}from"./DgFkfgD6.js";const R={class:"chart-container-transparent"},F={key:0,class:"loading-spinner"},L={key:1,class:"error-message"},W={__name:"word-cloud",setup(A){const a=c([]),s=c(!1),n=c(null),l=c(null),{$axios:m}=z(),w=async()=>{try{s.value=!0,n.value=null;const o=localStorage.getItem("spotify_access_token");if(!o){n.value="No Spotify access token found in localStorage.",s.value=!1;return}const t={Authorization:`Bearer ${o}`},u=await m.get("/genres/",{headers:t});a.value=u.data.genres||[]}catch(o){n.value="Error fetching data.",console.error(o)}finally{s.value=!1}},f=o=>{const t=l.value;t.innerHTML="";const u=t.offsetWidth,y=t.offsetHeight,h=o.sort((e,_)=>_.count-e.count).slice(0,100),b=h.map(e=>[e.genre,e.count]),v=h.map(e=>e.count),k=Math.max(...v),g=Math.min(...v),C=16,x={list:b,gridSize:Math.round(16*u/1024),weightFactor:e=>(e-g)/(k-g)*(y/10)+C,fontFamily:"Inter",color:()=>{const e=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];return e[Math.floor(Math.random()*e.length)]},backgroundColor:"transparent",rotateRatio:0,shuffle:!0,drawOutOfBound:!1};WordCloud(t,x)};B(a,o=>{o.length>0&&f(o)});let r;return S(()=>{w(),r=new ResizeObserver(()=>{a.value.length>0&&f(a.value)}),r.observe(l.value)}),I(()=>{r&&r.disconnect()}),(o,t)=>(d(),i("div",R,[s.value?(d(),i("div",F,"Loading...")):p("",!0),n.value?(d(),i("div",L,N(n.value),1)):p("",!0),O("div",{ref_key:"wordCloudRef",ref:l,class:"word-cloud-container"},null,512)]))}},H=M(W,[["__scopeId","data-v-9148dcc6"]]);export{H as default};
